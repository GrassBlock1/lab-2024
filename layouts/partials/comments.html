<script type="module">
    import { hatsu } from 'https://esm.sh/@kkna/preset-hatsu'
    import { openheart } from 'https://esm.sh/@kkna/preset-openheart'
    import { defineConfig, provider } from 'https://esm.sh/@kkna/context'

    defineConfig({
        presets: [
            hatsu({ instance: 'https://hatsu-nightly-debug.hyp3r.link' }),
        ],
    })

    const provide = provider(document.body, {
        initialValue: {
            presets: [
                openheart({ endpoint: 'https://lab.imgb.space/api/openheart/' }),
            ],
        },
    })

    provide.hostConnected()
</script>
<script type="module" src="https://esm.sh/@kkna/component-material"></script>
<kkna-material></kkna-material>

<link href="/css/mastodon-comments.css" rel="stylesheet" />
<section id="comments" class="article-content">
    <br>
    <p>评论由 <a href="http://hatsu.cli.rs">Hatsu</a> 驱动，可通过一个联邦宇宙帐号回复这个博文对应的帖子进行评论。</p>
    <p>你可以在 <a class="link" href="https://carlschwan.eu/2020/12/29/adding-comments-to-your-static-blog-with-mastodon/">此处</a> 以及 <a href="https://blog.southfox.me/2023/06/使用 Mastodon 作为博客的评论系统/">此处</a> 查看功能实现</p>
    <p id="mastodon-comments-list"><button id="load-comment" class="!rounded-md bg-primary-600 px-4 py-2 !text-neutral !no-underline hover:!bg-primary-500 dark:bg-primary-800 dark:hover:!bg-primary-700">展开评论区</button></p>
    <div id="comments-wrapper" class="mastodon-comment">
        <noscript><p>需要JavaScript才能加载和查看评论。尝试取消禁用JavaScript并重载，或者直接在Mastodon搜索框中输入本文章的链接。</p></noscript>
    </div>

    <script src="/js/purify.min.js"></script>
    <script src="/js/comments.js"></script>
    <!--示例内容-->
    <div id="comments-wrapper" class="mastodon-comment"><article class="comment op"><a title="Blog post author; View profile at @grassblock@o3o.ca" rel="external nofollow" href="https://o3o.ca/users/grassblock" class="avatar-link op"><picture><source media="(prefers-reduced-motion: no-preference)" srcset="https://mstdn-s3.o3o.studio/accounts/avatars/000/110/057/original/982659def0cca532.gif"><img alt="@grassblock@o3o.ca avatar" src="https://mstdn-s3.o3o.studio/accounts/avatars/000/110/057/original/982659def0cca532.gif" class="avatar"></picture></a><header class="author"><span class="display">UntrueGrassblock :EveOneCat34:</span><a rel="external nofollow" title="Blog post author: @grassblock@o3o.ca" href="https://o3o.ca/users/grassblock" class="instance op">o3o.ca</a></header><time datetime="2024-05-15T08:59:40Z"><a rel="external nofollow" title="View comment at o3o.ca" href="https://o3o.ca/users/grassblock/statuses/112444281996527894">May 15, 2024 at 4:59 PM</a></time><main><p><span translate="no" class="h-card"><a class="u-url mention" href="https://hatsu-nightly-debug.hyp3r.link/users/lab.imgb.space">@<span>lab.imgb.space</span></a></span> test</p></main><footer></footer></article><article class="comment comment-reply op"><a title="Blog post author; View profile at @grassblock@o3o.ca" rel="external nofollow" href="https://o3o.ca/users/grassblock" class="avatar-link op"><picture><source media="(prefers-reduced-motion: no-preference)" srcset="https://mstdn-s3.o3o.studio/accounts/avatars/000/110/057/original/982659def0cca532.gif"><img alt="@grassblock@o3o.ca avatar" src="https://mstdn-s3.o3o.studio/accounts/avatars/000/110/057/original/982659def0cca532.gif" class="avatar"></picture></a><header class="author"><span class="display">UntrueGrassblock :EveOneCat34:</span><a rel="external nofollow" title="Blog post author: @grassblock@o3o.ca" href="https://o3o.ca/users/grassblock" class="instance op">o3o.ca</a></header><time datetime="2024-05-29T15:18:07Z"><a rel="external nofollow" title="View comment at o3o.ca" href="https://o3o.ca/users/grassblock/statuses/112525042458361641">May 29, 2024 at 11:18 PM</a></time><main><p><span translate="no" class="h-card"><a class="u-url mention" href="https://hatsu-nightly-debug.hyp3r.link/users/lab.imgb.space">@<span>lab.imgb.space</span></a></span> test again.</p></main><footer></footer></article><p><button class="!rounded-md bg-primary-600 px-4 py-2 !text-neutral !no-underline hover:!bg-primary-500 dark:bg-primary-800 dark:hover:!bg-primary-700 addComment">进行评论</button></p>
        <dialog id="comment-dialog" class="lg:w-1/4 md:w-auto bg-neutral-300 rounded-s-[0.25rem] px-2 py-2 text-neutral">
            <h3>进行评论</h3>
            <button title="Cancel" id="close">×</button>
            <p>
                评论由 Hatsu 提供，可通过一个联邦宇宙帐号回复这个帖子进行评论。在下面填入自己的网站地址来跳转到自己网站中进行互动：
            </p><p>
        </p><p class="input-row">
            <input type="text" inputmode="url" autocapitalize="none" autocomplete="off" value="" id="instanceName" placeholder="例如：mastodon.social">
            <button class="button" id="go">前往</button>
        </p>
            <p>或是复制帖文的地址并通过自己网站的搜索框抓取这篇帖子进行互动：</p>
            <p class="input-row">
                <input type="text" readonly="" id="copyInput" value="https://lab.imgb.space/debug/">
                <button class="button" id="copy">复制</button>
            </p>
        </dialog></div>
</section>
